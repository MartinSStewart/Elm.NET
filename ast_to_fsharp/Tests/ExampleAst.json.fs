module ExampleAst

let json = @"
{ ""moduleDefinition"": { ""range"": [ 1, 1, 1, 87 ], ""value"": { ""type"": ""port"", ""port"": { ""moduleName"": { ""range"": [ 1, 13, 1, 26 ], ""value"": [ ""AnalyserPorts"" ] }, ""exposingList"": { ""range"": [ 1, 27, 1, 87 ], ""value"": { ""type"": ""explicit"", ""explicit"": [ { ""range"": [ 1, 37, 1, 49 ], ""value"": { ""type"": ""function"", ""function"": { ""name"": ""onFixMessage"" } } }, { ""range"": [ 1, 51, 1, 58 ], ""value"": { ""type"": ""function"", ""function"": { ""name"": ""onReset"" } } }, { ""range"": [ 1, 60, 1, 70 ], ""value"": { ""type"": ""function"", ""function"": { ""name"": ""sendReport"" } } }, { ""range"": [ 1, 72, 1, 86 ], ""value"": { ""type"": ""function"", ""function"": { ""name"": ""sendStateValue"" } } } ] } } } } }, ""imports"": [ { ""range"": [ 3, 1, 3, 51 ], ""value"": { ""moduleName"": { ""range"": [ 3, 8, 3, 23 ], ""value"": [ ""Analyser"", ""Report"" ] }, ""moduleAlias"": { ""range"": [ 3, 27, 3, 33 ], ""value"": [ ""Report"" ] }, ""exposingList"": { ""range"": [ 3, 34, 3, 51 ], ""value"": { ""type"": ""explicit"", ""explicit"": [ { ""range"": [ 3, 44, 3, 50 ], ""value"": { ""type"": ""typeOrAlias"", ""typeOrAlias"": { ""name"": ""Report"" } } } ] } } } }, { ""range"": [ 4, 1, 4, 52 ], ""value"": { ""moduleName"": { ""range"": [ 4, 8, 4, 22 ], ""value"": [ ""Analyser"", ""State"" ] }, ""moduleAlias"": null, ""exposingList"": { ""range"": [ 4, 23, 4, 52 ], ""value"": { ""type"": ""explicit"", ""explicit"": [ { ""range"": [ 4, 33, 4, 38 ], ""value"": { ""type"": ""typeOrAlias"", ""typeOrAlias"": { ""name"": ""State"" } } }, { ""range"": [ 4, 40, 4, 51 ], ""value"": { ""type"": ""function"", ""function"": { ""name"": ""encodeState"" } } } ] } } } }, { ""range"": [ 5, 1, 5, 36 ], ""value"": { ""moduleName"": { ""range"": [ 5, 8, 5, 19 ], ""value"": [ ""Json"", ""Encode"" ] }, ""moduleAlias"": null, ""exposingList"": { ""range"": [ 5, 20, 5, 36 ], ""value"": { ""type"": ""explicit"", ""explicit"": [ { ""range"": [ 5, 30, 5, 35 ], ""value"": { ""type"": ""typeOrAlias"", ""typeOrAlias"": { ""name"": ""Value"" } } } ] } } } } ], ""declarations"": [ { ""range"": [ 8, 1, 8, 40 ], ""value"": { ""type"": ""port"", ""port"": { ""name"": { ""range"": [ 8, 6, 8, 21 ], ""value"": ""sendReportValue"" }, ""typeAnnotation"": { ""range"": [ 8, 24, 8, 40 ], ""value"": { ""type"": ""function"", ""function"": { ""left"": { ""range"": [ 8, 24, 8, 29 ], ""value"": { ""type"": ""typed"", ""typed"": { ""moduleNameAndName"": { ""range"": [ 8, 24, 8, 29 ], ""value"": { ""moduleName"": [], ""name"": ""Value"" } }, ""args"": [] } } }, ""right"": { ""range"": [ 8, 33, 8, 40 ], ""value"": { ""type"": ""typed"", ""typed"": { ""moduleNameAndName"": { ""range"": [ 8, 33, 8, 36 ], ""value"": { ""moduleName"": [], ""name"": ""Cmd"" } }, ""args"": [ { ""range"": [ 8, 37, 8, 40 ], ""value"": { ""type"": ""generic"", ""generic"": { ""value"": ""msg"" } } } ] } } } } } } } } }, { ""range"": [ 11, 1, 11, 34 ], ""value"": { ""type"": ""port"", ""port"": { ""name"": { ""range"": [ 11, 6, 11, 15 ], ""value"": ""sendState"" }, ""typeAnnotation"": { ""range"": [ 11, 18, 11, 34 ], ""value"": { ""type"": ""function"", ""function"": { ""left"": { ""range"": [ 11, 18, 11, 23 ], ""value"": { ""type"": ""typed"", ""typed"": { ""moduleNameAndName"": { ""range"": [ 11, 18, 11, 23 ], ""value"": { ""moduleName"": [], ""name"": ""Value"" } }, ""args"": [] } } }, ""right"": { ""range"": [ 11, 27, 11, 34 ], ""value"": { ""type"": ""typed"", ""typed"": { ""moduleNameAndName"": { ""range"": [ 11, 27, 11, 30 ], ""value"": { ""moduleName"": [], ""name"": ""Cmd"" } }, ""args"": [ { ""range"": [ 11, 31, 11, 34 ], ""value"": { ""type"": ""generic"", ""generic"": { ""value"": ""msg"" } } } ] } } } } } } } } }, { ""range"": [ 14, 1, 14, 40 ], ""value"": { ""type"": ""port"", ""port"": { ""name"": { ""range"": [ 14, 6, 14, 13 ], ""value"": ""onReset"" }, ""typeAnnotation"": { ""range"": [ 14, 16, 14, 40 ], ""value"": { ""type"": ""function"", ""function"": { ""left"": { ""range"": [ 14, 16, 14, 29 ], ""value"": { ""type"": ""function"", ""function"": { ""left"": { ""range"": [ 14, 17, 14, 21 ], ""value"": { ""type"": ""typed"", ""typed"": { ""moduleNameAndName"": { ""range"": [ 14, 17, 14, 21 ], ""value"": { ""moduleName"": [], ""name"": ""Bool"" } }, ""args"": [] } } }, ""right"": { ""range"": [ 14, 25, 14, 28 ], ""value"": { ""type"": ""generic"", ""generic"": { ""value"": ""msg"" } } } } } }, ""right"": { ""range"": [ 14, 33, 14, 40 ], ""value"": { ""type"": ""typed"", ""typed"": { ""moduleNameAndName"": { ""range"": [ 14, 33, 14, 36 ], ""value"": { ""moduleName"": [], ""name"": ""Sub"" } }, ""args"": [ { ""range"": [ 14, 37, 14, 40 ], ""value"": { ""type"": ""generic"", ""generic"": { ""value"": ""msg"" } } } ] } } } } } } } } }, { ""range"": [ 17, 1, 17, 44 ], ""value"": { ""type"": ""port"", ""port"": { ""name"": { ""range"": [ 17, 6, 17, 18 ], ""value"": ""onFixMessage"" }, ""typeAnnotation"": { ""range"": [ 17, 21, 17, 44 ], ""value"": { ""type"": ""function"", ""function"": { ""left"": { ""range"": [ 17, 21, 17, 33 ], ""value"": { ""type"": ""function"", ""function"": { ""left"": { ""range"": [ 17, 22, 17, 25 ], ""value"": { ""type"": ""typed"", ""typed"": { ""moduleNameAndName"": { ""range"": [ 17, 22, 17, 25 ], ""value"": { ""moduleName"": [], ""name"": ""Int"" } }, ""args"": [] } } }, ""right"": { ""range"": [ 17, 29, 17, 32 ], ""value"": { ""type"": ""generic"", ""generic"": { ""value"": ""msg"" } } } } } }, ""right"": { ""range"": [ 17, 37, 17, 44 ], ""value"": { ""type"": ""typed"", ""typed"": { ""moduleNameAndName"": { ""range"": [ 17, 37, 17, 40 ], ""value"": { ""moduleName"": [], ""name"": ""Sub"" } }, ""args"": [ { ""range"": [ 17, 41, 17, 44 ], ""value"": { ""type"": ""generic"", ""generic"": { ""value"": ""msg"" } } } ] } } } } } } } } }, { ""range"": [ 20, 1, 22, 37 ], ""value"": { ""type"": ""function"", ""function"": { ""documentation"": null, ""signature"": { ""range"": [ 20, 1, 20, 31 ], ""value"": { ""name"": { ""range"": [ 20, 1, 20, 11 ], ""value"": ""sendReport"" }, ""typeAnnotation"": { ""range"": [ 20, 14, 20, 31 ], ""value"": { ""type"": ""function"", ""function"": { ""left"": { ""range"": [ 20, 14, 20, 20 ], ""value"": { ""type"": ""typed"", ""typed"": { ""moduleNameAndName"": { ""range"": [ 20, 14, 20, 20 ], ""value"": { ""moduleName"": [], ""name"": ""Report"" } }, ""args"": [] } } }, ""right"": { ""range"": [ 20, 24, 20, 31 ], ""value"": { ""type"": ""typed"", ""typed"": { ""moduleNameAndName"": { ""range"": [ 20, 24, 20, 27 ], ""value"": { ""moduleName"": [], ""name"": ""Cmd"" } }, ""args"": [ { ""range"": [ 20, 28, 20, 31 ], ""value"": { ""type"": ""generic"", ""generic"": { ""value"": ""msg"" } } } ] } } } } } } } }, ""declaration"": { ""range"": [ 21, 1, 22, 37 ], ""value"": { ""name"": { ""range"": [ 21, 1, 21, 11 ], ""value"": ""sendReport"" }, ""arguments"": [], ""expression"": { ""range"": [ 22, 5, 22, 37 ], ""value"": { ""type"": ""operatorapplication"", ""operatorapplication"": { ""operator"": ""<<"", ""direction"": ""left"", ""left"": { ""range"": [ 22, 5, 22, 20 ], ""value"": { ""type"": ""functionOrValue"", ""functionOrValue"": { ""moduleName"": [], ""name"": ""sendReportValue"" } } }, ""right"": { ""range"": [ 22, 24, 22, 37 ], ""value"": { ""type"": ""functionOrValue"", ""functionOrValue"": { ""moduleName"": [ ""Report"" ], ""name"": ""encode"" } } } } } } } } } } }, { ""range"": [ 25, 1, 27, 29 ], ""value"": { ""type"": ""function"", ""function"": { ""documentation"": null, ""signature"": { ""range"": [ 25, 1, 25, 34 ], ""value"": { ""name"": { ""range"": [ 25, 1, 25, 15 ], ""value"": ""sendStateValue"" }, ""typeAnnotation"": { ""range"": [ 25, 18, 25, 34 ], ""value"": { ""type"": ""function"", ""function"": { ""left"": { ""range"": [ 25, 18, 25, 23 ], ""value"": { ""type"": ""typed"", ""typed"": { ""moduleNameAndName"": { ""range"": [ 25, 18, 25, 23 ], ""value"": { ""moduleName"": [], ""name"": ""State"" } }, ""args"": [] } } }, ""right"": { ""range"": [ 25, 27, 25, 34 ], ""value"": { ""type"": ""typed"", ""typed"": { ""moduleNameAndName"": { ""range"": [ 25, 27, 25, 30 ], ""value"": { ""moduleName"": [], ""name"": ""Cmd"" } }, ""args"": [ { ""range"": [ 25, 31, 25, 34 ], ""value"": { ""type"": ""generic"", ""generic"": { ""value"": ""msg"" } } } ] } } } } } } } }, ""declaration"": { ""range"": [ 26, 1, 27, 29 ], ""value"": { ""name"": { ""range"": [ 26, 1, 26, 15 ], ""value"": ""sendStateValue"" }, ""arguments"": [], ""expression"": { ""range"": [ 27, 5, 27, 29 ], ""value"": { ""type"": ""operatorapplication"", ""operatorapplication"": { ""operator"": ""<<"", ""direction"": ""left"", ""left"": { ""range"": [ 27, 5, 27, 14 ], ""value"": { ""type"": ""functionOrValue"", ""functionOrValue"": { ""moduleName"": [], ""name"": ""sendState"" } } }, ""right"": { ""range"": [ 27, 18, 27, 29 ], ""value"": { ""type"": ""functionOrValue"", ""functionOrValue"": { ""moduleName"": [], ""name"": ""encodeState"" } } } } } } } } } } }, { ""range"": [ 29, 1, 35, 1 ], ""value"": { ""type"": ""function"", ""function"": { ""documentation"": null, ""signature"": null, ""declaration"": { ""range"": [ 29, 1, 35, 1 ], ""value"": { ""name"": { ""range"": [ 29, 1, 29, 4 ], ""value"": ""fib"" }, ""arguments"": [ { ""range"": [ 29, 5, 29, 6 ], ""value"": { ""type"": ""var"", ""var"": { ""value"": ""a"" } } } ], ""expression"": { ""range"": [ 30, 5, 35, 1 ], ""value"": { ""type"": ""ifBlock"", ""ifBlock"": { ""clause"": { ""range"": [ 30, 8, 30, 13 ], ""value"": { ""type"": ""operatorapplication"", ""operatorapplication"": { ""operator"": ""<"", ""direction"": ""left"", ""left"": { ""range"": [ 30, 8, 30, 9 ], ""value"": { ""type"": ""functionOrValue"", ""functionOrValue"": { ""moduleName"": [], ""name"": ""a"" } } }, ""right"": { ""range"": [ 30, 12, 30, 13 ], ""value"": { ""type"": ""integer"", ""integer"": 2 } } } } }, ""then"": { ""range"": [ 31, 9, 31, 10 ], ""value"": { ""type"": ""integer"", ""integer"": 0 } }, ""else"": { ""range"": [ 33, 9, 33, 38 ], ""value"": { ""type"": ""operatorapplication"", ""operatorapplication"": { ""operator"": ""+"", ""direction"": ""left"", ""left"": { ""range"": [ 33, 9, 33, 22 ], ""value"": { ""type"": ""parenthesized"", ""parenthesized"": { ""range"": [ 33, 10, 33, 21 ], ""value"": { ""type"": ""application"", ""application"": [ { ""range"": [ 33, 10, 33, 13 ], ""value"": { ""type"": ""functionOrValue"", ""functionOrValue"": { ""moduleName"": [], ""name"": ""fib"" } } }, { ""range"": [ 33, 14, 33, 21 ], ""value"": { ""type"": ""parenthesized"", ""parenthesized"": { ""range"": [ 33, 15, 33, 20 ], ""value"": { ""type"": ""operatorapplication"", ""operatorapplication"": { ""operator"": ""-"", ""direction"": ""left"", ""left"": { ""range"": [ 33, 15, 33, 16 ], ""value"": { ""type"": ""functionOrValue"", ""functionOrValue"": { ""moduleName"": [], ""name"": ""a"" } } }, ""right"": { ""range"": [ 33, 19, 33, 20 ], ""value"": { ""type"": ""integer"", ""integer"": 1 } } } } } } } ] } } } }, ""right"": { ""range"": [ 33, 25, 33, 38 ], ""value"": { ""type"": ""parenthesized"", ""parenthesized"": { ""range"": [ 33, 26, 33, 37 ], ""value"": { ""type"": ""application"", ""application"": [ { ""range"": [ 33, 26, 33, 29 ], ""value"": { ""type"": ""functionOrValue"", ""functionOrValue"": { ""moduleName"": [], ""name"": ""fib"" } } }, { ""range"": [ 33, 30, 33, 37 ], ""value"": { ""type"": ""parenthesized"", ""parenthesized"": { ""range"": [ 33, 31, 33, 36 ], ""value"": { ""type"": ""operatorapplication"", ""operatorapplication"": { ""operator"": ""-"", ""direction"": ""left"", ""left"": { ""range"": [ 33, 31, 33, 32 ], ""value"": { ""type"": ""functionOrValue"", ""functionOrValue"": { ""moduleName"": [], ""name"": ""a"" } } }, ""right"": { ""range"": [ 33, 35, 33, 36 ], ""value"": { ""type"": ""integer"", ""integer"": 2 } } } } } } } ] } } } } } } } } } } } } } } }, { ""range"": [ 35, 1, 40, 1 ], ""value"": { ""type"": ""function"", ""function"": { ""documentation"": null, ""signature"": null, ""declaration"": { ""range"": [ 35, 1, 40, 1 ], ""value"": { ""name"": { ""range"": [ 35, 1, 35, 10 ], ""value"": ""factorial"" }, ""arguments"": [ { ""range"": [ 35, 11, 35, 12 ], ""value"": { ""type"": ""var"", ""var"": { ""value"": ""a"" } } }, { ""range"": [ 35, 13, 35, 14 ], ""value"": { ""type"": ""var"", ""var"": { ""value"": ""b"" } } } ], ""expression"": { ""range"": [ 36, 5, 40, 1 ], ""value"": { ""type"": ""ifBlock"", ""ifBlock"": { ""clause"": { ""range"": [ 36, 8, 36, 14 ], ""value"": { ""type"": ""operatorapplication"", ""operatorapplication"": { ""operator"": ""<="", ""direction"": ""left"", ""left"": { ""range"": [ 36, 8, 36, 9 ], ""value"": { ""type"": ""functionOrValue"", ""functionOrValue"": { ""moduleName"": [], ""name"": ""a"" } } }, ""right"": { ""range"": [ 36, 13, 36, 14 ], ""value"": { ""type"": ""integer"", ""integer"": 0 } } } } }, ""then"": { ""range"": [ 37, 9, 37, 10 ], ""value"": { ""type"": ""integer"", ""integer"": 1 } }, ""else"": { ""range"": [ 39, 9, 39, 34 ], ""value"": { ""type"": ""application"", ""application"": [ { ""range"": [ 39, 9, 39, 18 ], ""value"": { ""type"": ""functionOrValue"", ""functionOrValue"": { ""moduleName"": [], ""name"": ""factorial"" } } }, { ""range"": [ 39, 19, 39, 26 ], ""value"": { ""type"": ""parenthesized"", ""parenthesized"": { ""range"": [ 39, 20, 39, 25 ], ""value"": { ""type"": ""operatorapplication"", ""operatorapplication"": { ""operator"": ""-"", ""direction"": ""left"", ""left"": { ""range"": [ 39, 20, 39, 21 ], ""value"": { ""type"": ""functionOrValue"", ""functionOrValue"": { ""moduleName"": [], ""name"": ""a"" } } }, ""right"": { ""range"": [ 39, 24, 39, 25 ], ""value"": { ""type"": ""integer"", ""integer"": 1 } } } } } } }, { ""range"": [ 39, 27, 39, 34 ], ""value"": { ""type"": ""parenthesized"", ""parenthesized"": { ""range"": [ 39, 28, 39, 33 ], ""value"": { ""type"": ""operatorapplication"", ""operatorapplication"": { ""operator"": ""*"", ""direction"": ""left"", ""left"": { ""range"": [ 39, 28, 39, 29 ], ""value"": { ""type"": ""functionOrValue"", ""functionOrValue"": { ""moduleName"": [], ""name"": ""b"" } } }, ""right"": { ""range"": [ 39, 32, 39, 33 ], ""value"": { ""type"": ""functionOrValue"", ""functionOrValue"": { ""moduleName"": [], ""name"": ""a"" } } } } } } } } ] } } } } } } } } } } ], ""comments"": [] }
"